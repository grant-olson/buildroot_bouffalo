From ffe304e93e09b07cedaaa7c70db9aebece33aa63 Mon Sep 17 00:00:00 2001
From: "Grant T. Olson" <kgo@grant-olson.net>
Date: Wed, 8 Feb 2023 15:54:28 -0500
Subject: [PATCH 500/501] Update bl808 device tree to point to fotg210 driver

---
 arch/riscv/boot/dts/bouffalolab/bl808-pine64-ox64.dts | 2 +-
 arch/riscv/boot/dts/bouffalolab/bl808-sipeed-m1s.dts  | 2 +-
 arch/riscv/boot/dts/bouffalolab/bl808.dtsi            | 6 ++++--
 3 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/arch/riscv/boot/dts/bouffalolab/bl808-pine64-ox64.dts b/arch/riscv/boot/dts/bouffalolab/bl808-pine64-ox64.dts
index f9ed636291f6..5bbbce46c9b8 100644
--- a/arch/riscv/boot/dts/bouffalolab/bl808-pine64-ox64.dts
+++ b/arch/riscv/boot/dts/bouffalolab/bl808-pine64-ox64.dts
@@ -49,7 +49,7 @@ &ipclic {
 	status = "okay";
 };
 
-&ehci0 {
+&usb0 {
 	status = "okay";
 };
 
diff --git a/arch/riscv/boot/dts/bouffalolab/bl808-sipeed-m1s.dts b/arch/riscv/boot/dts/bouffalolab/bl808-sipeed-m1s.dts
index 031c824f2061..b1384403dd16 100644
--- a/arch/riscv/boot/dts/bouffalolab/bl808-sipeed-m1s.dts
+++ b/arch/riscv/boot/dts/bouffalolab/bl808-sipeed-m1s.dts
@@ -54,7 +54,7 @@ &ipclic {
 	status = "okay";
 };
 
-&ehci0 {
+&usb0 {
 	status = "okay";
 };
 
diff --git a/arch/riscv/boot/dts/bouffalolab/bl808.dtsi b/arch/riscv/boot/dts/bouffalolab/bl808.dtsi
index dd795667dea6..4ee73a1d37a5 100644
--- a/arch/riscv/boot/dts/bouffalolab/bl808.dtsi
+++ b/arch/riscv/boot/dts/bouffalolab/bl808.dtsi
@@ -97,14 +97,14 @@ BFLB_IPC_DEVICE_SDHCI
 			status = "disabled";
 		};
 
-		ehci0: usb@20072000 {
-			compatible = "generic-ehci";
+		usb0: usb@20072000 {
+			compatible = "faraday,fotg210";
 			reg = <0x20072000 0x1000>;
 			interrupts-extended = <&ipclic BFLB_IPC_SOURCE_M0
 						       BFLB_IPC_DEVICE_USB
 						       IRQ_TYPE_EDGE_RISING>;
-                       mboxes = <&ipclic BFLB_IPC_SOURCE_M0 BFLB_IPC_DEVICE_USB>;
+			dr_mode = "peripheral";
 			clocks = <&xtal>;
 			status = "disabled";
 		};
 
-- 
2.34.1

